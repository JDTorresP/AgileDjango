<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Registro</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>
    <script>
        function enviarForm()
        {
            if($('#password').val() != $('#password2').val())
            {
                alert('Las claves no coinciden')
                return false;
            }

            $.ajax
            ({
                type:"POST",
                url:"http://localhost:8000/addUser/",
                data: JSON.stringify({  username: $('#username').val(),
                                        first_name: $('#first_name').val(),
                                        last_name: $('#last_name').val(),
                                        password: $('#password').val(),
                                        email: $('#email').val(),
                                        custom: {
                                            country: $('#country').val(),
                                            city: $('#city').val(),
                                            image: $('#image').val()
                                        }
                                    }),
                contentType: "application/json; charset=utf-8;",
                dataType: "json",
                success: function (data)
                {
                    window.location = "http://localhost:8000"
                },
                failure: function (errMsg)
                {
                    alert("Hubo un error");
                }

            });

            return false;
        }
    </script>
</head>
<body>
<div class="row">
    <div class="col-md-6 col-sm-offset-3">
        <div class="page-header">
            <h2>Registrar</h2>
        </div>
        <form method="post" action="" onsubmit="return enviarForm();">
            <input id="username" name="username" type="text" placeholder="User name" class="form-control input-md" required=""><br>
            <input id="first_name" name="first_name" type="text" placeholder="First name" class="form-control input-md" required=""><br>
            <input id="last_name" name="last_name" type="text" placeholder="Last name" class="form-control input-md" required=""><br>
            <input id="email" name="email" type="email" placeholder="Email" class="form-control input-md" required=""><br>
            <input id="country" name="country" type="text" placeholder="PaÃ­s" class="form-control input-md" required=""><br>
            <input id="city" name="city" type="text" placeholder="Ciudad" class="form-control input-md" required=""><br>
            <input id="image" name="image" type="file" placeholder="Imagen" class="form-control input-md" required=""><br>
            <input id="password" name="password" type="password" placeholder="Password" class="form-control input-md" required=""><br>
            <input id="password2" name="password2" type="password" placeholder="Verify password" class="form-control input-md" required=""><br>
            <input type="submit" value="Registrar" class="btn btn-primary">
            <a href="http://localhost:8000" class="btn btn-primary">Cancelar</a>
        </form>
    </div>
</div>
</body>
</html>